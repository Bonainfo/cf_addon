<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2016-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- License URL : https://store.webkul.com/license.html/ -->
<odoo>
	<data>

		<template id="pp_saas_menus" inherit_id="saas_portal_demo.portal_my_home_menu_demo">
			<xpath expr="//a[@href='/my/instances']/.." position="replace">
			</xpath>
		</template>

		<template id="saas_theme_pharmacistplace_layout" inherit_id="theme_pharmacistplace.theme_pharmacistplace_layout">
			<xpath expr="//li[@id='login_user_li']" position="after">
				<li id="upgrade_btn" t-if="website.user_id != user_id">
					<p style="padding:5px 5px 5px 15px;">
						<t t-set="return_dict" t-value="website.get_saas_portal_client()"/>
						<t t-if="return_dict">
							<a t-if="return_dict.get('instances', False)" href="/my/instances" class="btn btn-info btn-sm" style="width:100%">
								<span class="pull-left"> My Smart Pharmacy </span>
								<i class="fa fa-angle-right pull-right" style="font-size: 14px;"></i>
							</a>
							<!-- <a t-if="return_dict.get('pending_approval', False)" href="#" class="btn btn-info btn-sm" style="width:100%">
								<span class="pull-left"> Smart Pharmacy Pending Approval </span>
								<i class="fa fa-angle-right pull-right" style="font-size: 14px;"></i>
							</a> -->
							<a t-if="not return_dict.get('instances', False)" href="#" class="btn btn-info btn-sm" style="width:100%">
								<span class="pull-left"> Upgrade Smart Pharmacy </span>
								<i class="fa fa-angle-right pull-right" style="font-size: 14px;"></i>
							</a>
						</t>
					</p>
				</li>
			</xpath>
		</template>

		<template id="saas_theme_pharmacistplace_portal_layout" inherit_id="theme_pharmacistplace.theme_pharmacistplace_portal_layout">
			<xpath expr="//div[@id='smart_pharmacy_menus']//h3" position="after">
				<t t-set="return_dict" t-value="website.get_saas_portal_client()"/>
				<div t-if="return_dict">
					<a t-if="return_dict.get('instances', False)" href="/my/instances" class="btn btn-info mb8" style="width:100%">
						<span class="pull-left"> My Smart Pharmacy </span>
						<i class="fa fa-angle-right pull-right" style="font-size: 20px;"></i>
					</a>
					<!-- <a t-if="return_dict.get('pending_approval', False)" href="#" class="btn btn-info mb8" style="width:100%">
						<span class="pull-left"> Smart Pharmacy Pending Approval </span>
						<i class="fa fa-angle-right pull-right" style="font-size: 20px;"></i>
					</a> -->
					<a t-if="not return_dict.get('instances', False)" href="#" class="btn btn-info mb8" style="width:100%">
						<span class="pull-left"> Upgrade Smart Pharmacy </span>
						<i class="fa fa-angle-right pull-right" style="font-size: 20px;"></i>
					</a>
				</div>
			</xpath>
			<xpath expr="//div[@id='smart_pharmacy_menus']" position="attributes">
				<attribute name="class"></attribute>
			</xpath>
			<!-- <xpath expr="//div[@id='saas_sidebar_account']" position="attributes">
				<t t-set="return_dict" t-value="website.get_saas_portal_client()"/>
				<attribute name="t-if">return_dict.get('all_done', False)</attribute>
			</xpath> -->
			<xpath expr="//div[@id='saas_sidebar_account']//ul[hasclass('o_portal_submenu')]" position="inside">
				<t t-set="return_dict" t-value="website.get_saas_portal_client()"/>
				<!-- <li t-if="return_dict.get('all_done', False)" t-att-class="'active' if instance_active else ''"> -->
				<li t-if="return_dict.get('instances', False)" t-att-class="'active' if instance_active else ''">
					<a href="/my/instances" class="pp-brand-info">
						<span class="fa fa-cogs"/>
						<span>Instances</span>
						<i class="pull-right fa fa-angle-right"/>
					</a>
				</li>
			</xpath>
			<!-- <xpath expr="//div[hasclass('col-sm-3')]" position="inside">
				<h3 class="pp-brand-primary sidebar_menu"> Smart Pharmacy </h3>
				<div class="sidebar-nav" id="saas_sidebar_account">
					<div class="navbar navbar-default">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-saas">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="visible-xs navbar-brand" href="/my/home"> Smart Pharmacy</a>
						</div>
						<div class="collapse navbar-collapse" id="navbar-saas">
							<ul class="nav navbar-nav o_portal_submenu">
								<li t-att-class="'active' if instance_active else ''">
									<a href="/my/instances" class="pp-brand-info">
										<span class="fa fa-cogs"/>
										<span>Instances</span>
										<i class="pull-right fa fa-angle-right"/>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</xpath> -->
		</template>

		<template id="pp_portal_my_home_demo" inherit_id="saas_portal_demo.portal_my_home_demo">
			<xpath expr="//a[@href='/my/instances']/.." position="attributes">
				<attribute name="t-if">instance_count</attribute>
			</xpath>
		</template>

		<template id="pp_saas_portal_my_instances" inherit_id="saas_portal_demo.portal_my_instances">
			<xpath expr="//h3[hasclass('page-header')]" position="replace">
				<h1 class="mb32 hidden-md hidden-lg hidden-xl">Your Instances</h1>
				<div style="display:flex;margin-top: 10px;" class="mb32 hidden-sm hidden-xs">
					<div style="width: 40%;">
						<t t-call="theme_pharmacistplace.three_hr_lines_left_part"/>
					</div>
					<div style="width: 20%;text-align: center;padding: 10px;">
						<span style="font-size: 22px;color: #272866;padding: 3px;font-weight: bold;">
							Your Instances
						</span>
					</div>
					<div style="width: 40%;">
						<t t-call="theme_pharmacistplace.three_hr_lines_right_part"/>
					</div>
				</div>
			</xpath>
			<xpath expr="//table" position="replace">
				<div class="row col-md-offset-2">
					<div class="col-md-9">
						<t t-foreach="instances" t-as="instance">
							<t t-call="pp_saas_portal_demo.saas_instances_kanban"/>
						</t>
					</div>

				</div>
			</xpath>
			<!-- <xpath expr="//t[@t-esc='instance.name']/.." position="replace">
				<t t-if="len(instance._request_url('/saas_server/edit_database'))">
					<a t-attf-href="{{instance._request_url('/saas_server/edit_database')[0]}}">
						<t t-esc="instance.name"/>
					</a>
				</t>
				<t t-else="">
					<t t-esc="instance.name"/>
				</t>
			</xpath>
			<xpath expr="//span[@t-field='instances.expiration_datetime']" position="replace">
				<span t-field="instance.expiration_datetime"/>
			</xpath> -->
		</template>

		<template id="saas_instances_kanban" name="Website Saas Instances">
			<div class="instance_box pp_border_muted mb32" style="padding:10px;">
				<div class="instance_header pp-brand-info" style="display: -webkit-box;font-weight:bold;">
					<div style="width:70%">
						<span> Instance Name </span>
					</div>
					<div style="width:30%">
						<span class="pull-right"> Valid Until </span>
					</div>
				</div>
				<hr style="margin: 5px 0px;padding: 0px;border-color: #cccccc;"/>
				<div class="instance_details" style="display: -webkit-box;padding: 8px 0px;">
					<div class="" style="width:70%;    word-break: break-word;">
						<t t-if="len(instance._request_url('/saas_server/edit_database'))">
							<a t-attf-href="{{instance._request_url('/saas_server/edit_database')[0]}}">
								<t t-esc="instance.name"/>
							</a>
						</t >
						<t t-else="">
							<t t-esc="instance.name"/>
						</t>
					</div>
					<div class="" style="width:30%">
						<div class="pull-right text-muted">
							<span t-field="instance.expiration_datetime"/>
							<span t-if="not instance.expiration_datetime">
								--/--/-- --:--:--
							</span>
						</div>
					</div>
				</div>
				<hr style="margin: 5px 0px;padding: 0px;border-color: #cccccc;"/>
				<div class="row" style="margin:0px;padding-top: 8px;">
					<div class="col-md-6" style="padding:0px;">
						<div class="pp-brand-primary" style="font-weight:bold;">
							<i class="fa fa-pie-chart" aria-hidden="true"></i>
							<span>
								Statistics
							</span>
						</div>
						<div>
							<span>
								Current number of users: 
							</span>
							<span t-field="instance.users_len" class="pp-brand-primary" style="font-weight:bold;"></span>
						</div>
						<div>
							<span>
								File Storage usage(MB): 
							</span>
							<span t-field="instance.file_storage" class="pp-brand-primary" style="font-weight:bold;"></span>
						</div>
						<div>
							<span>
								Database Storage usage(MB): 
							</span>
							<span t-field="instance.db_storage" class="pp-brand-primary" style="font-weight:bold;"></span>
						</div>
					</div>
					<div class="col-md-6" style="padding:0px;">
						<div t-attf-class="pull-right label {{'label-primary' if instance.state == 'open' else 'label-danger' if instance.state in ['deleted', 'cancelled'] else 'label-warning' if instance.state == 'pending' else 'label-default' }}">
							<span t-field="instance.state"/>
						</div>
					</div>
				</div>

			</div>
		</template>

    </data>
</odoo>
